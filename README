Raclette: a warm sprouted cheese rolling down the rails

Actually a simple SproutCore app.

This is developed use the gem version of sproutcore.

  gem install sproutcore thin

Running tests

  http://0.0.0.0:4020/sproutcore/tests#raclette
  
Direct url to the tests:

  http://0.0.0.0:4020/static/raclette/en/current/tests.html
  
Here's how the app was initially setup:

  $ which sc-init
  /usr/bin/sc-init

  $ gem list | grep sprout
  sproutcore (1.0.1046)

  $ sc-init raclette
   ~ Created directory at raclette
   ~ Created file at raclette/Buildfile
   ~ Created file at raclette/README
   ~ Created directory at apps
   ~ Created directory at apps/raclette
   ~ Created file at apps/raclette/core.js
   ~ Created file at apps/raclette/main.js
   ~ Created directory at apps/raclette/resources
   ~ Created file at apps/raclette/resources/loading.rhtml
   ~ Created file at apps/raclette/resources/main_page.js
  Your new SproutCore project is ready!

  To get started, you can find your initial application in the "apps" directory.
  $ sc-gen model Raclette.Activity
   ~ Created directory at fixtures
   ~ Created file at fixtures/activity.js
   ~ Created directory at models
   ~ Created file at models/activity.js
   ~ Created directory at tests
   ~ Created directory at tests/models
   ~ Created file at tests/models/activity.js

  Your model is now ready to use!
  $ sc-gen controller Raclette.ActivityController
   ~ Created directory at controllers
   ~ Created file at controllers/activity.js
   ~ Created directory at tests/controllers
   ~ Created file at tests/controllers/activity.js

  Your controller is now ready to use!

  $ sc-server -v
  SproutCore v1.0.1046 Development Server
  Starting server at http://0.0.0.0:4020 in debug mode
  To quit sc-server, press Control-C

Debugging in the browser Javascript console.

Loading a model, changing and attribute and causing SC views to update:

  act = Raclette.store.find(Raclette.Activity,1)
  //(then modify an attribute)
  act.set('title', 'hello from the console three');
  SC.run(function(){});


Configuring git to track a remote branch:
  mate ./.git/config
  [branch "master"]
      remote = <nickname>
      merge = <remote-ref>

      [remote "<nickname>"]
      url = <url>
      fetch = <refspec>


using rvm / installing the required gems.

rvm install 1.9.1
rvm use 1.9.1
rvm gemset create raclette
rvm gemset use raclette
rvm gemset import default.gems 




Trying to find new records in the console:

Raclette.Questions.FIXTURES; // confusing (contains 2 objects ??)

Raclette.store.find(Raclette.Question).get('length');  //3
Raclette.store.find(Raclette.Question).toArray();  // array of 3 things
Raclette.store.find(Raclette.Question).getEach('prompt');
// ["<your question>", "What color is the sky?", "What color is dirt?"]

Handy console tip: To see changes, you may need to incorporate them into a runloop

This change won't be visible until a DOM event occurs (like mousing over the window):
  Raclette.mainPage.mainPane.addQuestionButton.set('title', 'Changed!')

But this change would be visible immediately:
  SC.run(function () { Raclette.mainPage.mainPane.addQuestionButton.set('title', 'Immediate!') })


### How we initially set up Rails

Step 1.
  rails (master)$ script/generate rspec_scaffold Activity title:string
        create  app/models/
        [etc.]
        create  db/migrate/20100625174957_create_activities.rb
         route  map.resources :activities
Step 2.
  rails (master)$ script/generate rspec_scaffold Question prompt:text activity_id:integer
        exists  app/models/
        [etc.]
        exists  db/migrate
        create  db/migrate/20100625175103_create_questions.rb
         route  map.resources :questions
Step 3.
  rails (master)$ rake db:migrate
  (in /Users/rklancer/dev/raclette/rails)
  ==  CreateActivities: migrating ===============================================
  -- create_table(:activities)
     -> 0.0012s
  ==  CreateActivities: migrated (0.0013s) ======================================

  ==  CreateQuestions: migrating ================================================
  -- create_table(:questions)
     -> 0.0010s
  ==  CreateQuestions: migrated (0.0016s) =======================================

Step 4.
  rails (master)$ script/server 
  => Booting WEBrick
  => Rails 2.3.8 application starting on http://0.0.0.0:3000
  => Call with -d to detach
  => Ctrl-C to shutdown server
  [2010-06-25 14:09:31] INFO  WEBrick 1.3.1
  [2010-06-25 14:09:31] INFO  ruby 1.9.1 (2010-01-10) [i386-darwin10.3.0]
  [2010-06-25 14:09:31] INFO  WEBrick::HTTPServer#start: pid=44284 port=3000

Step 5.
# hit http://localhost:3000/activities and http://localhost:3000/questions in a browser
# and create an Activity and a Question. Open a new console. Then the following should work...

  rails (master)$ curl localhost:3000/activities/1.json
  {"activity":{"title":"Running and jumping","guid":1,"questions":[{"guid":1}]}}

  rails (master)$ curl localhost:3000/questions/1.json
  {"question":{"activity_id":1,"prompt":"Run as fast as you can and jump as high as you can. Repeat.","guid":1}}